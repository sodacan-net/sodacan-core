package net.sodacan.rules;
import net.sodacan.rules.Event;
import net.sodacan.rules.State;
import net.sodacan.rules.Sender;

rule "initialize show"	
  then
  	insert(new State("show", "off"));
end

rule "Default show"
  when
		Tick(daytime==true)
		not Proposal(name=="show",priority>1)
  then
  	insertLogical(new Proposal("show",0, "off"));
end

rule "Is it night light show"
	when
		Tick(nighttime==true)
		not Proposal(name=="show",priority>2)
	then
		insertLogical(new Proposal("show",2,"nightlight"));
end

rule "Is it christmas"
	when
		Tick(nighttime==true)
		Month(value==12)
		not Proposal(name=="show",priority>3)
	then
		insertLogical(new Proposal("show",3,"christmas"));
end

rule "Send show"
	when
		Proposal(name=="show", $n: show)
		$s: State(name=="show")
	then
		$s.setValue($n);
		update($s);
		System.out.println("****Show is: " + $n );
end